<h1 class="list-item">Your order</h1>
<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Author</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><%= @book.title %></td>
            <td><%= @book.author.name %></td>
            <td><%= number_to_currency @book.price %></td>
        </tr>
    </tbody>
</table>
<button id="pay-now">Checkout now</button>

<script src="https://js.stripe.com/v3/"></script>
<script>
    var stripe = Stripe('pk_test_ajwTsG3aQv9tSFFhgO4PBi0800nXnJwsfN');
    function redirectToStripe() {
    stripe.redirectToCheckout({
    sessionId: '<%= @session.id %>'
    }).then(function (result) {
        // If `redirectToCheckout` fails due to a browser or network
        // error, display the localized error message to your customer
        // using `result.error.message`.
    });
    }
    document.querySelector("#pay-now").addEventListener("click",
    redirectToStripe)
</script>